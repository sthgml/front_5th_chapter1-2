var O=Object.defineProperty;var I=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var g=(e,t,r)=>I(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const N=()=>{const e=new Set;return{subscribe:l=>e.add(l),notify:()=>e.forEach(l=>l())}},P=(e,t)=>{const{subscribe:r,notify:l}=N();let o={...e};const s=m=>{o={...o,...m},l()},a=()=>({...o}),x=Object.fromEntries(Object.entries(t).map(([m,E])=>[m,(...L)=>s(E(a(),...L))]));return{getState:a,setState:s,subscribe:r,actions:x}},D=(e,t=window.localStorage)=>({get:()=>JSON.parse(t.getItem(e)),set:s=>t.setItem(e,JSON.stringify(s)),reset:()=>t.removeItem(e)}),M=e=>{const{subscribe:t,notify:r}=N(),l=()=>window.location.pathname,o=()=>e[l()],s=a=>{window.history.pushState(null,null,a),r()};return window.addEventListener("popstate",()=>r()),{get path(){return l()},push:s,subscribe:t,getTarget:o}};function n(e,t,...r){return{}}const $=1e3,S=$*60,b=S*60,U=b*24,A=e=>{const t=Date.now()-e;return t<S?"방금 전":t<b?`${Math.floor(t/S)}분 전`:t<U?`${Math.floor(t/b)}시간 전`:new Date(e).toLocaleString()},j=({author:e,time:t,content:r,likeUsers:l,activationLike:o=!1})=>n("div",{},n("div",{className:"flex items-center mb-2"},n("div",null,n("div",{className:"font-bold"},e),n("div",{className:"text-gray-500 text-sm"},A(t)))),n("p",null,r),n("div",{className:"mt-2 flex justify-between text-gray-500"},n("span",{className:`like-button cursor-pointer${o?" text-blue-500":""}`},"좋아요 ",l.length),n("span",null,"댓글"),n("span",null,"공유"))),F=()=>n("div",{},n("textarea",{id:"post-content",placeholder:"무슨 생각을 하고 계신가요?",className:"w-full p-2 border rounded"}),n("button",{id:"post-submit",className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded"},"게시")),G=()=>n("header",{},n("h1",{className:"text-2xl font-bold"},"항해플러스")),H=()=>n("footer",{},n("p",null,"© $",new Date().getFullYear()," 항해플러스. All rights reserved.")),T={value:null,get(){return this.value},set(e){this.value=e}},p=D("user"),k=1e3,i=k*60,q=i*60,u=P({currentUser:p.get(),loggedIn:!!p.get(),posts:[{id:1,author:"홍길동",time:Date.now()-5*i,content:"오늘 날씨가 정말 좋네요. 다들 좋은 하루 보내세요!",likeUsers:[]},{id:2,author:"김철수",time:Date.now()-15*i,content:"새로운 프로젝트를 시작했어요. 열심히 코딩 중입니다!",likeUsers:[]},{id:3,author:"이영희",time:Date.now()-30*i,content:"오늘 점심 메뉴 추천 받습니다. 뭐가 좋을까요?",likeUsers:[]},{id:4,author:"박민수",time:Date.now()-30*i,content:"주말에 등산 가실 분 계신가요? 함께 가요!",likeUsers:[]},{id:5,author:"정수연",time:Date.now()-2*q,content:"새로 나온 영화 재미있대요. 같이 보러 갈 사람?",likeUsers:[]}],error:null},{logout(e){return p.reset(),{...e,currentUser:null,loggedIn:!1}}}),h=e=>window.location.pathname===e?"text-blue-600 font-bold":"text-gray-600";function w({onClick:e,children:t,...r}){return n("a",{...r},t)}const C=()=>{const{loggedIn:e}=u.getState(),{logout:t}=u.actions;return n("nav",{},n("ul",{className:"flex justify-around"},n("li",null,n(w,{href:"/",className:h("/")},"홈")),!e&&n("li",null,n(w,{href:"/login",className:h("/login")},"로그인")),e&&n("li",null,n(w,{href:"/profile",className:h("/profile")},"프로필")),e&&n("li",null,n("a",{href:"#",id:"logout",className:"text-gray-600",onClick:r=>{r.preventDefault(),t()}},"로그아웃"))))},R=()=>{const{posts:e}=u.getState();return n("div",{},n("div",{className:"max-w-md w-full"},n(G,null),n(C,null),n("main",{className:"p-4"},n(F,null),n("div",{id:"posts-container",className:"space-y-4"},[...e].sort((t,r)=>r.time-t.time).map(t=>n(j,{...t,activationLike:!1})))),n(H,null)))},d=class d extends Error{constructor(){super(d.MESSAGE)}};g(d,"MESSAGE","ForbiddenError");let y=d;const f=class f extends Error{constructor(){super(f.MESSAGE)}};g(f,"MESSAGE","UnauthorizedError");let v=f;T.set(M({"/":R,"/login":()=>{const{loggedIn:e}=u.getState();if(e)throw new y;return n()},"/profile":()=>{const{loggedIn:e}=u.getState();if(!e)throw new v;return n()}}));const c="/front_5th_chapter1-2/";function B(){console.log(c),document.querySelector("#root").innerHTML=`<a href="${c}login">로그인</a>`;const t=new URLSearchParams(window.location.search).get("p");if(t!=null&&t.startsWith("/"))return window.history.pushState(null,null,c+t.slice(1));window.location.pathname.replace(c,"/")==="/login"&&(document.querySelector("#root").innerHTML=`<a href="${c}">홈</a>`)}B();
